{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "dependencyDashboard": true,
  "dependencyDashboardAutoclose": true,
  "extends": [
    "config:base"
  ],

  "packageRules": [
    {
      "description": "Automatically merges minor and patch-level updates",
      "matchUpdateTypes": ["minor", "patch", "digest"],
      "automerge": true,
      "automergeType": "branch"
    },
    {
      "description": "Automatically creates a PR whenever there is a new major Renovate version",
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "prCreation": "immediate"
    },

    // Ignore latest and localhost tags
    {
      "matchDatasources": ["docker"],
      "matchCurrentVersion": "/localhost|latest/",
      "enabled": false
    },

    // {
    //   "matchDatasources": ["docker"],
    //   "commitMessageTopic": "{{{depName}}} Docker tag",
    //   "commitMessageExtra": "to {{#if isPinDigest}}{{{newDigestShort}}}{{else}}{{#if isMajor}}{{{prettyNewMajor}}}{{else}}{{{prettyNewVersion}}}{{/if}}{{/if}}",
    //   "digest": {
    //     "branchTopic": "{{{depNameSanitized}}}-{{{currentValue}}}",
    //     "commitMessageExtra": "to {{newDigestShort}}",
    //     "commitMessageTopic": "{{{depName}}}{{#if currentValue}}:{{{currentValue}}}{{/if}} Docker digest",
    //     "group": {
    //       "commitMessageTopic": "{{{groupName}}}",
    //       "commitMessageExtra": ""
    //     }
    //   },
    //   "pin": {
    //     "commitMessageExtra": "",
    //     "groupName": "Docker digests",
    //     "group": {
    //       "commitMessageTopic": "{{{groupName}}}",
    //       "branchTopic": "digests-pin"
    //     }
    //   }
    // }

      // override Docker datasource defaults
      // https://docs.renovatebot.com/modules/datasource/#docker-datasource

    {
      "matchDatasources": ["docker"],
      "commitMessageTopic": "version",
      "digest": {
        "commitMessageTopic": "digest",
        "group": {
          "commitMessageTopic": "digest"
        }
      },
      "pin": {
        "group": {
          "commitMessageTopic": "version"
        }
      },
      "group": {
        "commitMessageTopic": "version"
      }
    },

    // actualbudget
    {
      "matchPackagePatterns": [".*\\/actual-server"],
      "customChangelogUrl": "https://github.com/actualbudget/actual-server",
      "prBodyNotes": "[releases.md](https://github.com/actualbudget/docs/blob/master/docs/releases.md)",
    }
  ],



  "rangeStrategy": "pin",
  "rebaseWhen": "behind-base-branch",
  "timezone": "America/Los_Angeles",
  "schedule": [
    "at any time"
  ],
  "reviewers": ["aedot"],

  "commitMessagePrefix": "{{depName}}:",
  "commitMessageAction": "Update",
  "commitMessageTopic": "dependency {{depName}}",
  "commitMessageExtra": "to {{#if isPinDigest}}{{{newDigestShort}}}{{else}}{{#if isMajor}}{{prettyNewMajor}}{{else}}{{#if isSingleVersion}}{{prettyNewVersion}}{{else}}{{#if newValue}}{{{newValue}}}{{else}}{{{newDigestShort}}}{{/if}}{{/if}}{{/if}}{{/if}}"

}
